/* 
    Aluk Query Library
    (c)2023-2024 Flutas,All rights,Reserved.
    (Powered by Xbodw)

    Linense MIT
*/

aluk=function(e,n,t){return new querylist(e,n,t)},window.al={fn:{ajax:function(e,n){return e||(e={promise:!1,url:""}),e.jsonp?new Promise(n=>{var t=document.createElement("script");let r=new URL(e.url),o=r.searchParams,l=aluk.generateRandomFunctionName();o.get("callback")||o.set("callback",l),t.src=r.href,document.body.appendChild(t)}):new Promise((t,r)=>{if(e.promise)fetch(e.url,{method:n||"GET",headers:e.headers,body:e.body}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");t(e)}).catch(e=>{r(e)});else{var o=new XMLHttpRequest;if(o.open(n||"GET",e.url),e.headers)for(var l in e.headers)o.setRequestHeader(l,e.headers[l]);o.onload=function(){o.status>=200&&o.status<300?t(o.response):r(o.statusText)},o.onerror=function(){r(o.statusText)},o.send(e.body)}})}}},al.fn.ajax.prototype=new Array,aluk.version="1.4.8",aluk.language="zh-cn",aluk.generateRandomFunctionName=(()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let n="aluk";for(let t=0;t<10;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),querylist=function(e){var n;if(""!=e&&null!=e){"string"==typeof e&&!1===aluk.checkHtml(e)?n=document.querySelectorAll(e):"number"==typeof e?n="":"object"==typeof e?n=new Array(e):!0===aluk.checkHtml(e)&&(n=new Array(aluk.htmlToElement(e))),n.length>1?n.forEach(e=>{this.push(e)}):n.length>0&&this.push(n[0]);this.NormalResult=document}else n=""},querylist.prototype=new Array,querylist.prototype.createChildElement=function(e,n){if("object"!=typeof n)throw"zh-cn"!=aluk.language?new Error("Element Options Type Must as the Object"):new Error("Element选项必须是Object");if(null==n.ElementType)throw"zh-cn"!=aluk.language?new Error("Element name not specified or empty"):new Error("Element类型不能为空");if(""==n.ElementType)throw"zh-cn"!=aluk.language?new Error("Element name not specified or empty"):new Error("Element类型不能为空");var t=document.createElement(n.ElementType);return null==n.Class||(t.classList.value+=n.Class),null==n.id||(t.id=n.id),null==n.innerHTML||(t.innerHTML=n.innerHTML),this[e].appendChild(t),Promise.resolve(this[e])},aluk.objectToCss=function(e){return Object.entries(e).map(([e,n])=>`${e}: ${n};`)},querylist.prototype.SetCss=function(e,n){if("object"==typeof e){var t=aluk.objectToCss(e),r=0;return this.forEach(e=>{e.style.cssText="",t.forEach(n=>{e.style.cssText+=n,r++})}),r}if(e>this.length-1)throw new Error("Index超出了预期范围");if(null==e||null==e)throw new Error("Index为空或不存在");if("object"!=typeof n)throw new Error("Css列表必须为Object");t=aluk.objectToCss(n);this[e].style.cssText="";r=0;return t.forEach(n=>{this[e].style.cssText+=n,r++}),r},querylist.prototype.AppendorMoveto=function(e,n,t){var r;if(t instanceof querylist){if(e>t.length-1)throw new Error("Index超出了预期范围");if(null==e||null==e)throw new Error("Index为空或不存在: 如果使用aluk querylist对象代替Element,那么请指定Index");r=t[e]}else{if(!aluk.isHtmlElement(t))throw new Error("请指定html元素或者aluk querylist对象");r=t}if(n>this.length-1)throw new Error("Index2超出了预期范围");if(null==n||null==n)throw new Error("Index2为空或不存在: 选择第几项来插入到appender的"+n+"项","那么请指定Index2");r.appendChild(this[e])},querylist.prototype.RemoveX=function(){let e=0;return this.forEach(n=>{n.remove(),e++}),e},querylist.prototype.continue=function(e){if(null==e||""==e)throw"zh-cn"!=aluk.language?new Error("Your Selector was empty or undefined,please."):new Error("您的选择器为空或未定义");for(var n=[],t=0;t<this.length;t++){var r=this[t].querySelectorAll(e);n.push(r)}var o=new querylist("<null>");return o.shift(),n.forEach(e=>{e.forEach(e=>{o.push(e)})}),o.NormalResult=o[0],o},querylist.prototype.gsval=function(e){if(null==e){var n=[];return this.forEach(e=>{n.push(e.value)}),n}this.forEach(n=>{n.value=e})},querylist.prototype.gstext=function(e){if(null==e){var n=[];return this.forEach(e=>{n.push(e.innerText)}),n}this.forEach(n=>{n.innerText=e})},querylist.prototype.newclicke=function(e){if(null==e||"function"!=typeof e)throw new Error("函数为空");this.forEach(n=>{n.addEventListener("click",function(n){e(n)})})},querylist.prototype.Prep=function(e){var n;document[(n="0x0",["addEventListener"][n-=0])]("DOMContentLoaded",function(n){e(n)})},aluk.isHtmlElement=function(e){return e instanceof Element||e instanceof HTMLElement},aluk.createElementX=function(e){if("object"!=typeof e)throw"zh-cn"!=aluk.language?new Error("Element Options Type Must as the Object"):new Error("Element选项必须是Object");if(null==e.ElementType)throw"zh-cn"!=aluk.language?new Error("Element name not specified or empty"):new Error("Element类型不能为空");if(""==e.ElementType)throw"zh-cn"!=aluk.language?new Error("Element name not specified or empty"):new Error("Element类型不能为空");var n=document.createElement(e.ElementType);return null==e.Class||(n.classList.value+=e.Class),null==e.id||(n.id=e.id),null==e.innerHTML||(n.innerHTML=e.innerHTML),aluk(n)},aluk.htmlEscape=function(e){return e.replace(/<|>|"|&/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"&":return"&amp;"}})},aluk.htmlUnescape=function(e){return e.replace(/&lt;|&gt;|&quot;|&amp;/g,e=>{switch(e){case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&amp;":return"&"}})},aluk.appendHTMLX=function(e,n,t){if(null==e)throw"zh-cn"!=aluk.language?new Error("AppendElement name not specified or empty"):new Error("追加者Element类型不能为空");if(null==n)throw"zh-cn"!=aluk.language?new Error("Append HTML not specified or empty"):new Error("追加的HTML不能为空");if("boolean"!=typeof t&&null!=t)throw"zh-cn"!=aluk.language?new Error("Options not specified or empty"):new Error("选项为空或不存在");let r=n.innerHTML,o=r;return t&&(o=aluk.htmlEscape(r)),e.innerHTML+=o,Promise.resolve(e.innerHTML)},aluk.checkHtml=function(e){return/<[a-z][\s\S]*>/i.test(e)},aluk.htmlToElement=function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild},aluk.WebUrlToBase64=function(e,n){var t=["send","responseType","onload"],r=function(e,n){return t[e-=0]},o=new XMLHttpRequest;o[r("0x2")]=function(){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(o.response)},o.open("GET",e),o[r("0x1")]="blob",o[r("0x0")]()},aluk.ajax=function(e){return new al.fn.ajax(e,e.method)},aluk.encodeX=function(e,n){var t;t="object"==typeof e?JSON.stringify(e):e;for(var r=btoa(encodeURI(t)),o=[],l=0;l<r.length;l++){var a=escape(r.charCodeAt(l)).replace(/\%u/g,"/u");o.push(a)}return o},aluk.decodeX=function(e,n){if(Array.isArray(e)){null==n?"0":n;var t="";return e.forEach(e=>{var n=unescape(String.fromCharCode(e)).replace(/\/u/g,"%u");t+=n}),decodeURI(atob(t))}},Terminal=function(e){if(!aluk.isHtmlElement(e))return this;this.Resultelement=e},TerminalAPI=function(){return this};var API=void 0,consolebak=void 0;function InTerminal(e){consolebak=console.log,console.log=function(e){return e},(API=new TerminalAPI).InvertHTMLinit=function(){aluk.createElementX({ElementType:"style",id:"InvertHTMLStyleSheet",innerHTML:"*.invert {filter: invert(100%);}"}).AppendorMoveto(0,0,document.head)},API.Invert=function(){aluk("*").forEach(e=>{e.classList.add("invert")})},API.Revert=function(){aluk("*").forEach(e=>{e.classList.remove("invert")})}}function Alarm(e,n){this.onalarmisdiscard=null,this.obj=e,this.title="提示",null!=n&&(this.title=n)}Terminal.prototype=new Object,Terminal.prototype.command=function(command){InTerminal("");var t="<br>"+eval(command)+"<br>";this.Resultelement.innerHTML+=t,API=void 0,console.log=consolebak},Alarm.prototype.show=function(){var e=document.createElement("div");e.className="alarm-box",e.innerHTML='<h4 id="alarm-title">'+this.title+'</h4><span id="alarm-text">'+this.obj+"</span>";var n=document.createElement("div");n.className="close-button",n.innerText="×",e.appendChild(n);var t=document.createElement("style");t.classList.add("alarmbox-style");t.appendChild(document.createTextNode('\n    .alarm-box {\n        position: fixed;\n        top: 20px;\n        left: 0px;\n        right: 0px;\n        width: 300px;\n        margin: auto;\n        padding: 20px;\n        background-color: #f9f9f9;\n        border-radius: 5px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      }\n      \n      .alarm-box .close-button {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        width: 20px;\n        height: 20px;\n        line-height: 20px;\n        text-align: center;\n        cursor: pointer;\n        color: #888;\n      }\n\n      .alarm-box>* {\n        font-family: "Microsoft YaHei Ui Light",ui-sans-serif,system-ui,Segoe UI;\n        font-size: 95%;\n        max-width: fix-content;\n      }\n      \n      .alarm-box .close-button:hover {\n        color: #000;\n      }\n')),document.head.appendChild(t),document.body.appendChild(e),n.onclick="this.parentNode.removeChild(this)",n.addEventListener("click",async function(){await aluk(".alarmbox-style").RemoveX(),await n.parentElement.remove(),this.onalarmisdiscard&&this.onalarmisdiscard()}.bind(this))};